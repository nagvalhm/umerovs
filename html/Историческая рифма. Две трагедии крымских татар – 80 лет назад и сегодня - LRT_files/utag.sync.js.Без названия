//tealium universal tag - utag.sync ut4.0.202409241817, Copyright 2024 Tealium.com Inc. All Rights Reserved.
function AMPStrategy(player){console.log('AMPStrategy::constructor');this.player_=player;this.ready_=false;this.currentAdPosition_=undefined;this.videoPlayed_=false;this.viewStartTime_=Date.now();this.videoStartTime_=undefined;this.subscribeEvents_();}
AMPStrategy.verify=function(player){return player instanceof HTMLElement&&player.nodeName==='VIDEO'&&player.getAttribute('data-sdkadaptive')==='true';};AMPStrategy.prototype.getVideoPath=function(){var item=this.player_.getAttribute('data-sdkid');return item||'';};AMPStrategy.prototype.subscribeEvents_=function(){if(this.player_.readyState>2){this.onPlaybackReady_();}
if(this.player_.currentTime>0&&!this.player_.paused&&!this.player_.ended){this.onVideoPlay_();}
this.player_.addEventListener('canplay',this.onPlaybackReady_.bind(this));this.player_.addEventListener('playing',this.onVideoPlay_.bind(this));};AMPStrategy.prototype.onPlaybackReady_=function(){this.ready_=true;};AMPStrategy.prototype.onVideoPlay_=function(){console.log('AMPStrategy::onVideoPlay_');this.videoStartTime_=Date.now();this.videoPlayed_=true;};AMPStrategy.prototype.isReady=function(){return this.ready_;};AMPStrategy.prototype.getTitle=function(){return(this.player_.attributes['title']&&this.player_.attributes['title'].value)||'';};AMPStrategy.prototype.getContentType=function(){return AMPStrategy.ContentType.CONTENT;};AMPStrategy.prototype.getAdPosition=function(){return'';};AMPStrategy.prototype.getTotalDuration=function(){var d=this.player_['duration'];return this.getTimeInSeconds_(d);};AMPStrategy.prototype.getState=function(){if(!this.videoPlayed_){return AMPStrategy.VideoState.UNPLAYED;}
if(this.player_.ended){return AMPStrategy.VideoState.COMPLETED;}
if(this.player_.paused){return AMPStrategy.VideoState.STOPPED;}
return AMPStrategy.VideoState.PLAYED;};AMPStrategy.prototype.timeElapsed_=function(timestamp){if(timestamp===undefined){return 0;}
return Date.now()-timestamp;};AMPStrategy.prototype.onEmbedCodeChanged_=function(){this.currentAdPosition_=undefined;this.adStartTime_=undefined;};AMPStrategy.prototype.getCurrentPlayTime=function(){var pt=this.player_['currentTime'];return this.getTimeInSeconds_(pt);};AMPStrategy.prototype.getBitrate=function(){return-1;};AMPStrategy.prototype.getThumbnailPath=function(){var item=this.player_['poster'];return item||'';};AMPStrategy.prototype.getPlayerType=function(){};AMPStrategy.prototype.getViewStartTime=function(){if(isNaN(this.viewStartTime_)){return 0;}
return this.timeElapsed_(this.viewStartTime_);};AMPStrategy.prototype.getViewPlayTime=function(){if(this.videoPlayed_){return this.timeElapsed_(this.viewStartTime_);}
return-1;};AMPStrategy.prototype.getViewAdPlayTime=function(){return-1;};AMPStrategy.prototype.getTimeInSeconds_=function(t){return((t===-1||isNaN(t))?-1:t*1000);};AMPStrategy.prototype.getStrategyName=function(){return'CS';};AMPStrategy.ContentType={AD:'ad',CONTENT:'ct'};AMPStrategy.AdPosition={PREROLL:'a1',MIDROLL:'a2',POSTROLL:'a3',OVERLAY:'a4',SPECIAL:'a5'};AMPStrategy.VideoState={UNPLAYED:'s1',PLAYED:'s2',STOPPED:'s3',COMPLETED:'s4'};window['_cbv_strategies']=window['_cbv_strategies']||[];window['_cbv_strategies'].push(AMPStrategy);window['_cbv']=window['_cbv']||[];